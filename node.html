<script type="text/javascript">
  RED.nodes.registerType('Einstein-Platform-Services', {
    category: 'function',
    color: '#a6bbcf',
    defaults: {
      name: { value: "Einstein Platform Services" },
      request_url: { value: "https://api.einstein.ai/v2/" },
      default_feature: { value: "IMAGECLASSIFICATION" },
      default_modelid: { value: "GeneralImageClassifier" },
      account_id: { value: "" },
      private_key: { value: "" }
    },
    inputs: 1,
    outputs: 1,
    icon: "file.png",
    label: function () {
      return this.name || "Einstein-Platform-Services";
    }
  });
</script>

<script type="text/x-red" data-template-name="Einstein-Platform-Services">
  <div class="form-row">
      <label for="node-input-name"><i class="icon-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <label for="node-input-request_url"><i class="icon-tag"></i> URL</label>
    <input type="text" id="node-input-request_url" placeholder="Request URL" />
  </div>
  <div class="form-row">
    <label for="node-input-default_feature"><i class="icon-tag"></i> Default Feature</label>
    <input type="text" id="node-input-default_feature" placeholder="Default Feature" />
  </div>
  <div class="form-row">
    <label for="node-input-default_modelid"><i class="icon-tag"></i> Default ModelId</label>
    <input type="text" id="node-input-default_modelid" placeholder="Default ModelId" />
  </div>
  <div class="form-row">
    <label for="node-input-account_id"><i class="icon-tag"></i> Account ID</label>
    <input type="text" id="node-input-account_id" placeholder="Account ID" />
  </div>
  <div class="form-row">
    <label for="node-input-private_key"><i class="icon-tag"></i> Private Key</label>
    <textarea id="node-input-private_key" placeholder="Private Key"></textarea>
  </div>
</script>

<script type="text/x-red" data-help-name="Einstein-Platform-Services">
  <p>A Node-RED node to easly access prediction APIs of the Salesforce Einstein Platform Services. (Vision/Language)</p>
  <h2>Parameters</h2>
  <h3>node settings</h3>
  <ul>
    <li>Name</li>
    <ul>
      <li>Set display name.</li>
    </ul>
    <li>Name</li>
    <ul>
      <li>Set display name.</li>
    </ul>
    <li>URL</li>
    <ul>
      <li>Set Einstein Platform Services API endpoint URL.</li>
    </ul>
    <li>Default Feature</li>
    <ul>
      <li>A node use this feature if node can not define which feature use from an input paramters.</li>
      <ul>
        <li>IMAGECLASSIFICATION (<-default)</li>
        <li>OBJECTDETECTION</li>
        <li>SENTIMENT</li>
        <li>INTENT</li>
      </ul>
    </ul>
    <li>Default ModelId</li>
    <ul>
      <li>A node use this model id if node can not define which model id use from an input patameters.(Default: GeneralImageClassifier)</li>
    </ul>
    <li>Account Id</li>
    <ul>
      <li>Set Einstein Platform Services's account id.</li>
    </ul>
    <li>Private Key</li>
    <ul>
      <li>Set Einstein Platform Services's private key.</li>
    </ul>
  </ul>
  <p>If you use this node on the Node-RED running on the Heroku and "Einstein Vision Add-ons" is added to your Heroku application, You don't need to set them to the placeholder. (This node gets an account id & a private_key from environment valuables.)</p>
  <h3>Input</h3>
  <ul>
      <li>msg.eps.feature</li>
      <ul>
        <li>Define feature to use.</li>
        <ul>
          <li>APIUSAGE</li>
          <li>IMAGECLASSIFICATION</li>
          <li>OBJECTDETECTION</li>
          <li>SENTIMENT</li>
          <li>INTENT</li>
        </ul>
      </ul>
  </ul>
  <ul>
    <li>msg.eps.modelid</li>
    <ul>
      <li>Define modelid to use.</li>
    </ul>
  </ul>
  <ul>
    <li>msg.eps.sampleBase64Content</li>
    <ul>
      <li>Use this parameter if you select  IMAGECLASSIFICATION/OBJECTDETECTION feature.</li>
      <li>Set a character string encoded image with base64.</li>
    </ul>
  </ul>
  <ul>
    <li>msg.eps.sampleLocation</li>
    <ul>
      <li>Use this parameter if you select. IMAGECLASSIFICATION/OBJECTDETECTION feature.</li>
      <li>Set a image url to predict.</li>
    </ul>
  </ul>
  <ul>
    <li>msg.eps.document</li>
    <ul>
      <li>Use this parameter if you select SENTIMENT/INTENT feature.</li>
      <li>Set a text to predict.</li>
    </ul>
  </ul>
  <h3>Output</h3>
  <ul>
    <li>msg.payload</li>
    <ul>
      <li>Einstein Platform Services raw response or node execution error.</li>
    </ul>
  </ul>
</script>